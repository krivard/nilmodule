################################################################################
#                   README NILCLUSTERING MODULE TAC/KBP 2014                   #
################################################################################

Configuration
-------------

Befor installing and running the code it is necessary to specify the paths to
the external data (e.g., ProPPR output). This has to be done in the first
section of the Makefile. The necessary files are:

[description]
- PROPPR_TEST
- PROPPR_TRAIN 
- QNAME 
- SCORE_TEST 
- SCORE_TRAIN 
- TOKEN 
- QSENT 
- INSENT 
- TACPR 

It is also possible to specify the amount of padding (e.g., the number of "X"
in "NILXXX") by changing the FORMATTING_FLAGS.

Installation
------------

Run "make" inside the main directory. This will set up a virtual environment
with the necessary python dependencies and then run the different clustering
scripts. If you only want to install the virtual environment without running 
the clustering scripts, use "make venv" instead. 

Running the code
----------------

The makefile provides several targets corresponding to the different steps of
the clustering process:

- "make raw" will generate all the input needed for the different 
clustering algorithms. 

- "make baseline" will run baseline clustering . At the moment, there are the 
following baseline versions:
    -- baseline0:   String only. All queries with the same query string are
                    assigned the same nid.
    -- baseline1:   String and did. All queries with the same query string and
                    the same did are assigned the same nid.
    -- baseline2:   String and document distance. Queries that have the same 
                    query string are assigned to different clusters based on
                    the distance between the documents they appear in. This
                    distance is calculated based on the tokens that appear
                    in the documents.
                    Agglomerative clustering is used. The clustering parameters
                    (pairwise distance measure between documents, distance 
                    measure between clusters, clustering method and threshold 
                    for flattening) can be specified in the makefile. Detailed 
                    information regarding the clustering algorithm and its 
                    parameters can be found in the scipy documentation. 
    -- baseline3:   String and document distance. Same as baseline2, but 
                    instead of agglomerative clustering exploratory clustering
                    is used. Detailed information regarding the clustering
                    algorithm and its parameters can be found in the ExploreEM
                    documentation.
    -- baseline4:   String and sentence distance. Queries that have the same 
                    query string are assigned to different clusters based on
                    the distance between the sentences they appear in. The 
                    distance between the documents they appear in. This 
                    distance is calculated based on the tokens that appear
                    in the documents.
                    Agglomerative clustering is used. The clustering parameters
                    (pairwise distance measure between documents, distance 
                    measure between clusters, clustering method and threshold 
                    for flattening) can be specified in the makefile. Detailed 
                    information regarding the clustering algorithm and its 
                    parameters can be found in the scipy documentation. 
    -- baseline5:   String and sentence distance. Same as baseline4, but 
                    instead of agglomerative clustering exploratory clustering
                    is used. Detailed information regarding the clustering
                    algorithm and its parameters can be found in the ExploreEM
                    documentation.
    -- baseline6:   String and sentence distance with string and document
                    distance as a fallback. In a first step, queries for which
                    sentence information is available are clustered using
                    baseline4. In a second step, the remaining queries are
                    clustered using baseline2.
    -- baseline7:   String and sentence distance with string and document
                    distance as a fallback. In a first step, queries for which
                    sentence information is available are clustered using
                    baseline5. In a second step, the remaining queries are
                    clustered using baseline3.

- "make explore" will run exploreEM clustering. At the moment, there are the 
following exploreEM versions:
    -- unsupervised0:   String, did, document tokens, and score. For each query, 
                        a feature vector with the query string, did, the tokens 
                        of the document and the ProPPR scores is generated. This 
                        is a global context only unsupervised version of 
                        exploreEM.
    -- unsupervised1:   String, sid, sentence tokens, and score. For each query, 
                        a feature vector with the query string, did, the tokens 
                        of the sentence and the ProPPR scores is generated. This 
                        is a local context only unsupervised version of 
                        exploreEM.
    -- unsupervised2:   
    -- semi_supervised0:
    -- semi_supervised1:   
    -- semi_supervised2:   

[all, raw, baseline, explore targets]

[different stages of clustering]

[output]

Cleaning up
-----------

[clean]
